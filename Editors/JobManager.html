<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Job Manager</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<style>
input {
	width: 100%;
}
</style>
</head>

<body>
<div class="alert alert-info" role="alert" id="alert"><center><h3>Make sure to use double quotes on every string!</h3></center></div>

<div class="panel panel-primary" style="width: 50%; margin: auto;">
  <div class="panel-heading">Job Manager</div>
  <div class="panel-body">   
Company Name: <input id="site" placeholder="Abc Co" /><br/><br/>
Company Job Link: <input id="siteurl" placeholder="comp.com/jobs" /><br/><br/>
Selector Var (for each loop): <input id="svar" placeholder='$("a.job")' /><br/><br/>
Selector For Job Name: <input id="name" placeholder="var name = $(this).text();" /><br/><br/>
Selector For Job Location: <input id="location" placeholder="var location = $(this).prev().text();" /><br/><br/>
Selector For Job URL: <input id="url" placeholder='var url = $(this).attr("href");' /><br/><br/>
Multi-page? (true or false): <input id="mp" value="false" /><br/><br/>
Multi Selector Var?(pagination): <input id="mpvar" value="none" /><br/><br/>
Multi-page Lead URL (if needed default none): <input id="mplead" value="none" /><br/><br/>
<button type="button" class="btn btn-info" onclick="cleanUp()">Clear Inputs</button> <button type="button" class="btn btn-info pull-right" onClick="runIt()">Upload</button>
  </div>
</div>

<script>
var ref = new Firebase("https://glowing-inferno-8009.firebaseio.com/scrape-vars/");
function cleanUp() {
	$("#site").val("");
	$("#siteurl").val("");
	$("#svar").val("");
	$("#name").val("");
	$("#location").val("");
	$("#url").val("");

};
function runIt() {
	var hasdata = true;
	var site = $("#site").val(); 
	var siteurl = $("#siteurl").val(); 
	var sVar = $("#svar").val(); 
	var multi = $("#mp").val(); 
	var msVar = $("#mpvar").val(); 
	var msLead = $("#mplead").val(); 
	var name = $("#name").val(); 
	var location = $("#location").val(); 
	var url = $("#url").val();
	var metadata = {
                        site: site,
                        siteurl: siteurl,
						multi: eval(multi),
						msLead: msLead,
						msVar: msVar,
						sVar: sVar,
						sitevars: name + location + url
                    };
	for (obj in metadata) {
		if (metadata[obj] === "") {
		hasdata = false;
		};
	};
	
	if (hasdata) {
		ref.push(metadata);
	$("#alert h3").text("Upload Success! Make sure to run jobscrape.js to check for errors");
	cleanUp();
	} else {$("#alert h3").text("Make sure you fill out the whole form. You trying to break the script or somethin'?")}
};
</script>
</body>
</html>
